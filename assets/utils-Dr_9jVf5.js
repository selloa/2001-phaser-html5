const n={speech:{position:"bottom",fontSize:"36px",fontFamily:"'Courier New', monospace",typewriter:!0,typewriterSpeed:115,splitCharacterName:!0},caption:{position:"bottom",fontSize:"36px",fontFamily:"'Futura Now Inline Fill', 'Courier New', monospace",typewriter:!0,typewriterSpeed:80},title:{position:"custom",fontSize:"60px",fontFamily:"'Futura Now Inline Fill', 'Courier New', monospace",typewriter:!0,typewriterSpeed:100}};function h(a,i={}){const t=n[a];return t?{...t,...i}:(console.warn(`Text preset '${a}' not found. Using default.`),n.caption)}class c{constructor(i){this.scene=i,this.textObject=null}showPreset(i,t,e={}){const r=h(t,e);this.show(i,r)}show(i,t={}){const e={position:t.position||"bottom",x:t.x||null,y:t.y||null,fontSize:t.fontSize||"20px",fontFamily:t.fontFamily||"'Futura Now Inline Fill', 'Courier New', monospace",color:t.color||"#ffffff",fadeIn:t.fadeIn!==!1,duration:t.duration||1e3,typewriter:t.typewriter!==!1,typewriterSpeed:t.typewriterSpeed||50,splitCharacterName:t.splitCharacterName||!1,onComplete:t.onComplete||null},{width:r,height:s}=this.scene.cameras.main;let o=e.x||r/2,l=e.y;if(e.position==="custom")o=e.x||r/2,l=e.y||s/2;else if(!l)switch(e.position){case"top":l=s*.15;break;case"center":l=s/2;break;case"bottom":default:l=s*.85;break}this.textObject=this.scene.add.text(o,l,"",{fontSize:e.fontSize,fontFamily:e.fontFamily,color:e.color,align:"center",wordWrap:{width:r*.9}}).setOrigin(.5),this.textObject.setAlpha(0),e.typewriter?this.startTypewriterEffect(i,e):(this.textObject.setText(i),e.fadeIn?this.scene.tweens.add({targets:this.textObject,alpha:1,duration:e.duration,ease:"Power2"}):this.textObject.setAlpha(1))}startTypewriterEffect(i,t){let e=0;if(this.fullText=i,t.splitCharacterName){const r=i.match(/^([^:]+:)\s*(.*)/);if(r){const s=r[1],o=r[2];this.textObject.setText(s),this.textObject.setAlpha(1),this.typewriterTimer=this.scene.time.addEvent({delay:t.typewriterSpeed,callback:()=>{e<o.length?(this.textObject.setText(s+" "+o.substring(0,e+1)),e++):(this.typewriterTimer.destroy(),this.typewriterTimer=null,t.onComplete&&t.onComplete())},loop:!0});return}}this.scene.tweens.add({targets:this.textObject,alpha:1,duration:200,ease:"Power2"}),this.typewriterTimer=this.scene.time.addEvent({delay:t.typewriterSpeed,callback:()=>{e<this.fullText.length?(this.textObject.setText(this.fullText.substring(0,e+1)),e++):(this.typewriterTimer.destroy(),this.typewriterTimer=null,t.onComplete&&t.onComplete())},loop:!0})}completeTypewriter(){this.typewriterTimer&&(this.typewriterTimer.destroy(),this.typewriterTimer=null),this.textObject&&this.fullText&&this.textObject.setText(this.fullText)}hide(i=!0,t=500){this.textObject&&(this.typewriterTimer&&(this.typewriterTimer.destroy(),this.typewriterTimer=null),i?this.scene.tweens.add({targets:this.textObject,alpha:0,duration:t,ease:"Power2",onComplete:()=>{this.textObject.destroy(),this.textObject=null}}):(this.textObject.destroy(),this.textObject=null))}destroy(){this.typewriterTimer&&(this.typewriterTimer.destroy(),this.typewriterTimer=null),this.textObject&&(this.textObject.destroy(),this.textObject=null)}}export{c as T};
