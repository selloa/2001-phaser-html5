const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/intro-scenes-D1yMYxhC.js","assets/utils-Dr_9jVf5.js","assets/story-scenes-BiJM82FB.js","assets/final-scenes-D78NiYko.js"])))=>i.map(i=>d[i]);
import{r as v,g as P}from"./phaser-Czz4FBZH.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();var y=v();const f=P(y),b="modulepreload",L=function(i){return"/2001-phaser-html5/"+i},g={},d=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let w=function(a){return Promise.all(a.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");n=w(t.map(a=>{if(a=L(a),a in g)return;g[a]=!0;const u=a.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":b,u||(l.as="script"),l.crossOrigin="",l.href=a,c&&l.setAttribute("nonce",c),document.head.appendChild(l),u)return new Promise((_,E)=>{l.addEventListener("load",_),l.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};class O{constructor(e){this.game=e,this.loadedScenes=new Map,this.sceneModules=new Map}async loadScene(e){if(this.loadedScenes.has(e))return this.loadedScenes.get(e);try{let t;switch(e){case"IntroScene":t=await d(()=>import("./intro-scenes-D1yMYxhC.js").then(r=>r.I),__vite__mapDeps([0,1]));break;case"TitleScene":t=await d(()=>import("./intro-scenes-D1yMYxhC.js").then(r=>r.T),__vite__mapDeps([0,1]));break;case"Scene001":t=await d(()=>import("./story-scenes-BiJM82FB.js").then(r=>r.S),__vite__mapDeps([2,0,1]));break;case"Scene002":t=await d(()=>import("./story-scenes-BiJM82FB.js").then(r=>r.a),__vite__mapDeps([2,0,1]));break;case"Scene003":t=await d(()=>import("./story-scenes-BiJM82FB.js").then(r=>r.b),__vite__mapDeps([2,0,1]));break;case"Scene004":t=await d(()=>import("./final-scenes-D78NiYko.js").then(r=>r.S),__vite__mapDeps([3,0,1]));break;case"Scene005":t=await d(()=>import("./final-scenes-D78NiYko.js").then(r=>r.a),__vite__mapDeps([3,0,1]));break;default:throw new Error(`Unknown scene key: ${e}`)}return this.sceneModules.set(e,t.default),this.game.scene.getScene(e)||this.game.scene.add(e,t.default),this.loadedScenes.set(e,t.default),console.log(`Scene ${e} loaded successfully`),t.default}catch(t){throw console.error(`Failed to load scene ${e}:`,t),t}}async preloadCriticalScenes(){console.log("Preloading critical scenes...");try{await Promise.all([this.loadScene("IntroScene"),this.loadScene("TitleScene")]),console.log("Critical scenes preloaded successfully")}catch(e){console.error("Failed to preload critical scenes:",e)}}async startScene(e,t={}){try{await this.loadScene(e),this.game.scene.start(e,t)}catch(r){console.error(`Failed to start scene ${e}:`,r)}}getNextSceneKey(e){const t=["IntroScene","TitleScene","Scene001","Scene002","Scene003","Scene004","Scene005"],r=t.indexOf(e);return r>=0&&r<t.length-1?t[r+1]:t[0]}isSceneLoaded(e){return this.loadedScenes.has(e)}getLoadedSceneCount(){return this.loadedScenes.size}}const T={type:f.AUTO,width:window.innerWidth,height:window.innerHeight,parent:"game-container",backgroundColor:"#000000",scale:{mode:f.Scale.RESIZE,autoCenter:f.Scale.CENTER_BOTH,min:{width:320,height:240},max:{width:1920,height:1080}},scene:[],physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},audio:{disableWebAudio:!1}},m=new f.Game(T),S=new O(m);S.preloadCriticalScenes().then(()=>{S.startScene("IntroScene")}).catch(i=>{console.error("Failed to initialize game:",i)});window.sceneManager=S;let p;window.addEventListener("resize",()=>{clearTimeout(p),p=setTimeout(()=>{const i=window.innerWidth,e=window.innerHeight;console.log(`Resizing canvas to: ${i}x${e}`),m.scale.resize(i,e),m.scene.getScenes().forEach(t=>{t.resize&&t.resize(i,e)})},100)});
